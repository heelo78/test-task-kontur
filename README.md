# Employee

**Сервис Сотрудников** (**Employee**) позволяет просматривать, а также централизованно хранить и изменять данные о сотрудниках. Это WebAPI-приложение, которое взаимодействует с другими сервисами через клиент и REST API. Таким образом, информация не дублируется, а изменение данных в **Employee** автоматически отражается во всех организациях сотрудника.

Этот документ описывает [хранимые сущности](#хранимые-сущности) и [методы](#методы) для **сервиса Сотрудников**.

## Хранимые сущности

Используются для СОП и формирования отчетов.

> [!NOTE]
> В **Employee** сущность привязана к пользователю и является общей для всех его организаций. Пользовательские данные о сущностях изолированы.

Сервис Сотрудников хранит три вида сущностей:

1.  [Person](#person) — `guid` сотрудника и его персональные данные.
2.  [Position](#position) — должность сотрудника в организации.
3.  [Role](#role) — роль сотрудника с должностью в определенной организации в той же самой или другой организации.

### Person

Данные хранятся в таблице `employee.persons`.

**Ключ:** `guid` сотрудника.

**Реквизиты:**

*   `fullName` — ФИО;
*   `innFl` — ИНН;
*   `birthDate` — дата рождения;
*   `gender` — пол;
*   `citizenship` — гражданство;
*   `birthplace` — место рождения;
*   `phone` — номер телефона;
*   `email` — электронная почта;
*   `registrationAddress` — адрес регистрации;
*   `identityCard` — паспортные данные:
    *   `DocumentType` — тип документа;
    *   `Series` — серия;
    *   `Number` — номер;
    *   `Issuer` — кем выдан;
    *   `IssuanceDate` — дата выдачи;
    *   `IssuerCode` — код подразделения;
*   `foreignAddress` — адрес проживания.

Подробнее см. [`PersonProps.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/PersonProps.cs) и [`Person.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/Person.cs).

### Position

Данные хранятся в таблице `employee.positions`.

> [!NOTE]
> Сотрудник может иметь только одну должность в организации.

**Ключ:** `guid` сотрудника + `guid` организации.

**Значение:** `Title` — должность сотрудника в определенной организации.

Подробнее см. [`Position.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/Position.cs).

### Role

Данные хранятся в таблице `employee.roles`.

**Типы ролей:**

1.  `Head` — руководитель;
2.  `ChiefAccountant` — главный бухгалтер;
3.  `Sender` — уполномоченный представитель (отправитель);
4.  `Ip` — индивидуальный предприниматель.

> [!NOTE]
> Сотрудник может относиться к нескольким организациям — иметь в них роль и/или должность. Роль сотрудника в организации не связана с наличием должности в ней. Например, в первой организации сотрудник имеет должность **Директор** и не имеет ролей, а во второй — имеет роль **Sender** и не имеет должностей.

**Ключ:** `guid` организации + `Type` (тип роли).

**Значение** будет иметь два поля:

1.  `Person` — `guid` сотрудника с нужной ролью.
2.  `PositionOrganization` — `guid` организации, в которой сотрудник выполняет эту роль. Не обязательно совпадает с `guid` организации в ключе.

Подробнее см. [`Role.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/Role.cs),[`RoleType.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/RoleType.cs),[`RoleResponse.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/Models/RoleResponse.cs)

### Методы

> [!NOTE]
> Подробнее о методах см. [`IEmployeeClient.cs`](https://github.com/NatBur444/task-for-technical-writer/blob/main/IEmployeeClient.cs)

**Добавление и изменение сущностей:**

1.  `SavePerson` — позволяет создать и редактировать профиль сотрудника. 
2.  `SavePosition` — позволяет назначить и изменить должность.
3.  `SaveRole` — позволяет назначить и изменить роль.

**Поиск сущностей:**

1.  `GetPerson` — возвращает персональные данные сотрудника по его `guid`.
2.  `GetPersons` — возвращает список сотрудников, которые созданы данным пользователем.
3.  `SearchPersons` — осуществляет поиск сотрудников по заданным фильтрам.
4.  `GetPosition` — возвращает должность сотрудника.
5.  `GetRole` — возвращает роль сотрудника в определенной организации.
6.  `GetRoles` — возвращает все роли для одной или всех организаций пользователя.
7.  `GetPersonRoles` — возвращает список всех ролей, назначенных конкретному сотруднику.

**Удаление сущностей:**

1.  `DeletePerson` — удаляет профиль сотрудника.
2.  `DeleteRole` — удаляет роль определенного типа в организации.
3.  `DeleteRoles` — удаляет все роли в определенной организации.
